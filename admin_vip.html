<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin VIP Approval</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:#111;
  color:#fff;
}

.header{
  background:#b7ff2c;
  color:#000;
  padding:16px;
  font-size:22px;
  font-weight:700;
}

.container{
  padding:16px;
}

.card{
  background:#1c1c1c;
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}

.title{
  font-size:18px;
  font-weight:700;
}

.info{
  font-size:14px;
  margin-top:4px;
  color:#ccc;
}

.btn{
  margin-top:10px;
  padding:12px;
  width:100%;
  border:none;
  border-radius:10px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}

.approve{
  background:#00ff88;
  color:#000;
}

.reject{
  background:#ff4444;
  color:#fff;
  margin-top:6px;
}

.small{
  font-size:13px;
  color:#aaa;
  margin-top:6px;
}
</style>
</head>

<body>

<div class="header">Admin VIP Approval</div>

<div class="container" id="list"></div>

<script>
/*
DATA STRUCTURE USED (localStorage):

vip_requests = [
  {
    user:"alex",
    vip:3,
    price:499,
    rate:3.66,
    date:1690000000000
  }
]

users = {
  alex:{
    balance:0,
    vip:{
      level:3,
      rate:3.66,
      start:1690000000000
    }
  }
}
*/

const list = document.getElementById("list");

let requests = JSON.parse(localStorage.getItem("vip_requests")) || [];
let users = JSON.parse(localStorage.getItem("users")) || {};

if(requests.length === 0){
  list.innerHTML = "<p>No pending VIP requests.</p>";
}

requests.forEach((req,index)=>{
  const div = document.createElement("div");
  div.className="card";

  div.innerHTML = `
    <div class="title">User: ${req.user}</div>
    <div class="info">VIP Level: VIP ${req.vip}</div>
    <div class="info">Deposit: $${req.price}</div>
    <div class="info">Daily Profit: ${req.rate}%</div>
    <div class="small">
      Proof sent via Telegram:<br>
      <b>@SmartInvest202</b>
    </div>
    <button class="btn approve">Approve Deposit + VIP</button>
    <button class="btn reject">Reject</button>
  `;

  div.querySelector(".approve").onclick = ()=>{
    if(!users[req.user]){
      users[req.user] = { balance:0 };
    }

    // Add deposit to balance
    users[req.user].balance += req.price;

    // Activate VIP
    users[req.user].vip = {
      level:req.vip,
      rate:req.rate,
      start:Date.now()
    };

    // Remove request
    requests.splice(index,1);

    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("vip_requests", JSON.stringify(requests));

    alert("VIP APPROVED & BALANCE UPDATED");
    location.reload();
  };

  div.querySelector(".reject").onclick = ()=>{
    requests.splice(index,1);
    localStorage.setItem("vip_requests", JSON.stringify(requests));
    alert("Request rejected");
    location.reload();
  };

  list.appendChild(div);
});
</script>

</body>
</html>
