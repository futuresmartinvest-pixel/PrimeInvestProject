<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>PrimeGlobalPro – Home</title>

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f5f6fa;
    padding-bottom: 110px; /* space for bottom nav */
  }

  /* TOP BAR */
  .top-bar {
    background: #1a1a1a;
    color: white;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 20px;
  }

  .cube-icon {
    width: 32px;
    height: 32px;
    cursor: pointer;
  }

  /* BALANCE CARD */
  .balance-card {
    background: white;
    margin: 20px;
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.08);
  }

  .balance-amount {
    font-size: 38px;
    font-weight: bold;
    text-align: center;
  }

  .balance-label {
    text-align: center;
    color: #888;
    margin-bottom: 15px;
  }

  #dailyEarnings {
    text-align:center; 
    color:#2563EB; 
    font-size:18px;
  }

  /* VIP SECTION */
  .vip-box {
    background: #1a1a1a;
    color: white;
    margin: 20px;
    padding: 15px;
    border-radius: 15px;
  }

  .vip-item {
    padding: 10px 0;
    border-bottom: 1px solid #333;
  }

  .vip-item:last-child {
    border-bottom: none;
  }

  /* ======== BOTTOM NAVIGATION ======== */
  .bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 90px;
    background: #ffffff;
    display: flex;
    justify-content: space-around;
    align-items: center;
    border-radius: 25px 25px 0 0;
    box-shadow: 0px -8px 20px rgba(0,0,0,0.12);
    z-index: 999;
  }

  .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 13px;
    color: #808080;
    text-decoration: none;
    font-weight: 500;
  }

  .nav-item svg {
    width: 26px;
    height: 26px;
    margin-bottom: 4px;
    opacity: 0.75;
  }

  .nav-item.active {
    color: #2563EB;
  }

  .nav-item.active svg {
    stroke: #2563EB;
    opacity: 1;
  }
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="top-bar">
  <div id="userName">User</div>

  <!-- RUBIK CUBE BUTTON -->
  <img src="cube.png" class="cube-icon" onclick="location.href='cube.html'">
</div>

<!-- BALANCE CARD -->
<div class="balance-card">
  <div class="balance-amount" id="balanceAmount">$0.00</div>
  <div class="balance-label">Total Balance</div>
  <div id="dailyEarnings">+$0.00 Today</div>
</div>

<!-- VIP STATUS SECTION -->
<div class="vip-box">
  <h3 style="text-align:center;margin-top:0;">Active VIP Plans</h3>
  <div id="vipList">No active VIP plans.</div>
</div>


<!-- ======== BOTTOM NAVIGATION WITH INLINE ICONS ======== -->
<nav class="bottom-nav">

  <a href="index.html" class="nav-item active">
    <!-- HOME ICON -->
    <svg fill="none" stroke="#808080" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M3 9.5L12 3l9 6.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V9.5z"/>
    </svg>
    <span>Home</span>
  </a>

  <a href="tasks.html" class="nav-item">
    <!-- TASKS ICON -->
    <svg fill="none" stroke="#808080" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M9 11l3 3L22 4" />
      <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
    </svg>
    <span>Tasks</span>
  </a>

  <a href="wallet.html" class="nav-item">
    <!-- WALLET ICON -->
    <svg fill="none" stroke="#808080" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M3 7h18v10H3z"/>
      <path d="M16 12h2"/>
      <path d="M3 7l9-4 9 4"/>
    </svg>
    <span>Wallet</span>
  </a>

  <a href="referral.html" class="nav-item">
    <!-- REFERRAL ICON -->
    <svg fill="none" stroke="#808080" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="7" r="4" />
      <path d="M5.5 21a6.5 6.5 0 0 1 13 0" />
    </svg>
    <span>Referral</span>
  </a>

  <a href="VIP.html" class="nav-item">
    <!-- VIP CROWN ICON -->
    <svg fill="none" stroke="#808080" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M3 18l2-10 5 3 4-3 5 3 2-10" />
      <path d="M2 18h20v3H2z" />
    </svg>
    <span>VIP</span>
  </a>

</nav>


<!-- FIREBASE LOGIC -->
<script type="module">
  import { auth, db } from "./firebase.js";
  import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

  auth.onAuthStateChanged(async (user) => {
    if (!user) {
      location.href = "auth.html";
      return;
    }

    const userDoc = await getDoc(doc(db, "users", user.uid));

    if (!userDoc.exists()) return;

    const data = userDoc.data();

    document.getElementById("userName").innerText = data.name || "User";
    document.getElementById("balanceAmount").innerText = "$" + (data.balance || 0).toFixed(2);
    document.getElementById("dailyEarnings").innerText = "+$" + (data.todayEarned || 0).toFixed(2) + " Today";

    const vipBox = document.getElementById("vipList");
    vipBox.innerHTML = "";

    if (!data.vipPlans) {
      vipBox.innerHTML = "<p>No active VIP plans.</p>";
      return;
    }

    Object.keys(data.vipPlans).forEach(key => {
      const plan = data.vipPlans[key];
      if (plan.active) {
        vipBox.innerHTML += `
          <div class="vip-item">
            <strong>${key.toUpperCase()}</strong> — $${plan.amount} earning ${plan.percent}% daily
          </div>
        `;
      }
    });
  });
</script>

</body>
</html>
